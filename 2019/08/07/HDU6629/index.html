<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>é¢˜è§£ï¼šHDU6629 String Mathching | KONGJUNE&#39;s BLOG</title>



    <link rel="icon" type="image/png" href="/favicon.png">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        <!-- MathJaxé…ç½®ï¼Œå¯é€šè¿‡å•ç¾å…ƒç¬¦å·ä¹¦å†™è¡Œå†…å…¬å¼ç­‰ -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- ç»™MathJaxå…ƒç´ æ·»åŠ has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- é€šè¿‡è¿æ¥CDNåŠ è½½MathJaxçš„jsä»£ç  -->
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


    


</head>
<body>
    <div class="wrapper">
        <script>
    $("#toTop").attr("style", "display:none;");
    $(function() {
        $(window).scroll(function() {
            var scroll_top = $(window).scrollTop();
            if (scroll_top >= 100) {
                $("#toTop").fadeIn();
            } else {
                $("#toTop").fadeOut();
            }
        })
    })
</script>
<header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">KONGJUNE&#39;s BLOG</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">å½’æ¡£</a>
                
                <a class="menu-item" href="/category">ç±»åˆ«</a>
                
                <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                <a class="menu-item" href="/mc">Minecraft</a>
                
                <input id="switch_default" type="checkbox" class="switch_default" style="display: none;">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">KONGJUNE&#39;s BLOG</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">å½’æ¡£</a>
                
                <a class="menu-item" href="/category">ç±»åˆ«</a>
                
                <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                <a class="menu-item" href="/mc">Minecraft</a>
                
            </div>
        </div>
    </nav>
</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
<style>
    .box {
        display: none;
        position: fixed;
        right: 20px;
        bottom: 20px;
        height: 30px;
        width: 50px;
        text-align: center;
        padding-top: 20px;
        background-color: rgba(255, 255, 255, 0.7);
        color: #000000;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0px 3px 5px #666666;
        transition: background-color .5s;
        -moz-transition: background-color .5s;
        -webkit-transition: background-color .5s;
        -o-transition: background-color .5s;
    }

    .box:hover:before {
        top: 50%
    }

    .box:hover {
        background-color: rgba(41, 42, 45, 0.7);
    }

    .box:hover .box-in {
        border-color: #FFFFFF transparent transparent #FFFFFF;
    }

    .box:before {
        position: absolute;
        top: -50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        border: 3px solid black;
        border-color: black transparent transparent white;
        font-weight: bold;
    }

    .box-in {
        visibility: visible;
        display: inline-block;
        height: 15px;
        width: 15px;
        border: 3px solid black;
        border-color: #777777 transparent transparent #777777;
        transform: rotate(45deg);
        transition: border-color .5s;
        -moz-transition: border-color .5s;
        -webkit-transition: border-color .5s;
        -o-transition: border-color .5s;
    }
</style>

<body>
    <div id="toTop" class="box" style="z-index:9999;">
        <div class="box-in"></div>
    </div>
</body>
<script>
    var timer = null;
    toTop.onclick = function() {
        cancelAnimationFrame(timer);
        timer = requestAnimationFrame(function fn() {
            var oTop = document.body.scrollTop || document.documentElement.scrollTop;
            var sPeed = oTop / 10;
            if (oTop > 0) {
                document.body.scrollTop = document.documentElement.scrollTop = oTop - sPeed;
                timer = requestAnimationFrame(fn);
            } else {
                cancelAnimationFrame(timer);
            }
        });
    }
</script>

        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">å±•å¼€å…¨éƒ¨ç›®å½•</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "æ”¶èµ·ç›®å½•æ¬¡é¡¹"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "å±•å¼€å…¨éƒ¨ç›®å½•"
    }
</script>

    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">é¢˜è§£ï¼šHDU6629 String Mathching</h1>
            
                <div class="post-meta">
                    
                        ç¼–è€…: <a itemprop="author" rel="author" href="/">KONGJUNE</a>
                    

                    
                        <span class="post-time">
                        æ—¥æœŸ: <a href="#">2019-08-07&nbsp;&nbsp;12:00:09</a>
                        </span>
                    
                    
                        <span class="post-category">
                    ç±»åˆ«:
                            
                                <a href="/categories/é¢˜è§£/">é¢˜è§£</a>
                            
                        </span>
                    
                </div>
            
        </header>
        
        <div style="
            background-image: url(/img/HDU6629/banner.jpg);
            height: 300px;
            background-position-x: center;
            background-position-y: center;
            background-repeat: no-repeat;
            -moz-background-size:100% 100%;
            background-size:cover;
        ">
        <p> </p>
        </div>
        
        <div class="post-content">
            <p>æœ¬é¢˜ä¸º <strong>2019 HDU Multi-University Training Contest 5 çš„ 1007 é¢˜</strong>ã€‚</p>
<p>é¢˜ç›®ä¼ é€é—¨ï¼š<a href="http://acm.hdu.edu.cn/showproblem.php?pid=6629" target="_blank" rel="noopener">ğŸšª</a></p>
<blockquote>
<h3 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h3><p>String matching is a common type of problem in computer science. One string matching problem is as following:</p>
<p>Given a string $S[0\cdots lenâˆ’1]$, please calculate the length of the longest common prefix of $S[i\cdots lenâˆ’1]$ and $S[0 \cdots lenâˆ’1]$ for each $i&gt;0$.</p>
<p>I believe everyone can do it by brute force.<br>The pseudo code of the brute force approach is as the following:</p>
<p><img src="/img/HDU6629/C722-1006-1.png" alt="img"></p>
<p>We are wondering, for any given string, what is the number of compare operations invoked if we use the above algorithm. Please tell us the answer before we attempt to run this algorithm.</p>
<h3 id="input"><a href="#input" class="headerlink" title="input"></a>input</h3><p>The first line contains an integer $T$, denoting the number of test cases.<br>Each test case contains one string in a line consisting of printable ASCII characters except space.</p>
<ul>
<li><p>$1 \leq T \leq 30$</p>
</li>
<li><p>string length $\leq 106$ for every string</p>
</li>
</ul>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>For each test, print an integer in one line indicating the number of compare operations invoked if we run the algorithm in the statement against the input string.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">_Happy_New_Year_</span><br><span class="line">ywwyww</span><br><span class="line">zjczzzjczjczzzjc</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">17</span><br><span class="line">7</span><br><span class="line">32</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="é¢˜æ„-amp-ç®—æ³•"><a href="#é¢˜æ„-amp-ç®—æ³•" class="headerlink" title="é¢˜æ„ &amp; ç®—æ³•"></a>é¢˜æ„ &amp; ç®—æ³•</h2><p>é¢˜ç›®å°±æ˜¯é—®é¢˜ç›®ä¸­è¿™ä¸ªç®—æ³•ä¸­æ¯”è¾ƒçš„æ¬¡æ•°ã€‚é¢˜ç›®ä¸­æåŠçš„ç®—æ³•å°±æ˜¯æš´åŠ›å¯¹ä¸²ä¸­æ¯ä¸€ä¸ªä½ç½®è¿›è¡Œå‰ç¼€åŒ¹é…ã€‚æˆ‘ä»¬å¯ä»¥æ¨çŸ¥ï¼Œå¦‚æœå­ä¸²é•¿åº¦ä¸º $x$ ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡Œ $x+1$ æ¬¡åŒ¹é…ï¼ˆå› ä¸ºè¿˜æœ‰ä¸€æ¬¡åŒ¹é…å¤±è´¥çš„æƒ…å†µï¼‰ã€‚è€Œå¦‚æœæˆ‘åŒ¹é…çš„å­ä¸²æœ€åä¸€ä½åˆ°è¾¾äº†åŸä¸²çš„æœ€åä¸€ä½çš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œ $x$ æ¬¡åŒ¹é…ï¼ˆå› ä¸ºåŒ¹é…å¤±è´¥çš„æƒ…å†µä¸ä¼šå‡ºç°äº†ï¼‰ã€‚æ‰€ä»¥è¿™ä¸ªé—®é¢˜å°±è½¬æ¢æˆäº†å‰ç¼€åŒ¹é…ã€‚æ‰©å±•KMPç®—æ³•å°±æ˜¯ä¸ºè¿™ç§é—®é¢˜äº§ç”Ÿçš„ã€‚</p>
<p>KMPç®—æ³•è®²è§£ä¼ é€é—¨ï¼š<a href="http://www.kongjune.com/2019/08/06/%E6%89%A9%E5%B1%95KMP/" target="_blank" rel="noopener">ğŸšª</a></p>
<p>è¿™ä¸ªé¢˜æŒºå‘çš„ï¼Œå„ç§å¡æ—¶é—´å•Šã€‚å¡<code>memset()</code>ï¼ˆå…¶å®ä¹Ÿæ²¡å¿…è¦ç”¨<code>memset()</code>ï¼‰ï¼Œå¡<code>cin</code>â€¦â€¦T äº†ä¸€æ™šä¸Šæˆ‘æ‰è¿‡å»â€¦â€¦</p>
<h2 id="ACä»£ç "><a href="#ACä»£ç " class="headerlink" title="ACä»£ç "></a>ACä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> nexts[<span class="number">1000006</span>];</span><br><span class="line"><span class="keyword">char</span> T[<span class="number">1000006</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getNext</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">strlen</span>(T);</span><br><span class="line">    <span class="comment">// m:Tçš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>, p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= p || i + nexts[i - a] &gt;= p) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= p) p = i;</span><br><span class="line">            <span class="keyword">while</span> (p &lt; m &amp;&amp; T[p] == T[p - i])</span><br><span class="line">                p++;</span><br><span class="line">            nexts[i] = p - i;</span><br><span class="line">            <span class="keyword">if</span>(i + nexts[i] &gt;= m)</span><br><span class="line">                ans += nexts[i];</span><br><span class="line">            <span class="keyword">else</span> ans += nexts[i] + <span class="number">1</span>;</span><br><span class="line">            a = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            nexts[i] = nexts[i - a];</span><br><span class="line">            <span class="keyword">if</span>(i + nexts[i] &gt;= m)</span><br><span class="line">                ans += nexts[i];</span><br><span class="line">            <span class="keyword">else</span> ans += nexts[i] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, T);</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        getNext();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>æœ¬æ–‡ä½œè€…:</span>
                        <a itemprop="author" rel="author" href="/"><span>KONGJUNE</span></a>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>æœ¬æ–‡é“¾æ¥:</span>
                        <span><a href="http://kongjune.com/2019/08/07/HDU6629/">http://kongjune.com/2019/08/07/HDU6629/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>ç‰ˆæƒå£°æ˜:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>æœ¬æ–‡æ ‡ç­¾:</span>
                <span class="tag">
                    
                    
                        <a href="/tags/ACM/"># ACM</a>
                    
                        <a href="/tags/Programming/"># Programming</a>
                    
                        <a href="/tags/é¢˜è§£/"># é¢˜è§£</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">è¿”å›ä¸Šä¸€é¡µ</a>
                <span>Â· </span>
                <a href="/">è¿”å›ä¸»é¡µ</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2019/08/06/æ‰©å±•KMP/">ç®—æ³•å­¦ä¹ ï¼šæ‰©å±•KMP</a>
            
        </section>
        <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
        <div id="lv-container" data-id="city" data-uid="MTAyMC80NTY1NC8yMjE2NQ==">
        	<script type="text/javascript">
           (function(d, s) {
               var j, e = d.getElementsByTagName(s)[0];

               if (typeof LivereTower === 'function') { return; }

               j = d.createElement(s);
               j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
               j.async = true;

               e.parentNode.insertBefore(j, e);
           })(document, 'script');
        	</script>
        <noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
        </div>
        <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© KONGJUNE | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
